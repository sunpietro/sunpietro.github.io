/*!
 * Dragster - drag'n'drop library v1.0.0
 * https://github.com/sunpietro/dragster
 *
 * Copyright 2015 Piotr Nalepa
 * http://blog.piotrnalepa.pl
 *
 * Released under the MIT license
 * https://github.com/sunpietro/dragster/blob/master/LICENSE
 *
 * Date: 2015-03-11T08:00Z
 */
(function(e,t){e.DD=function(e){var n="is-dragging",r="is-drag-over",o="dragster-draggable",i="dragster-drag-region",s="dragster-drop-placeholder",a="dragster-temp",l="dragster-is-hidden",c={elementSelector:".dragster-block",regionSelector:".dragster-region"},d="draggable",u="data-placeholder-position",f={top:false,bottom:false},p,m,h,g,v,L,y,E,b,w,A,C,S,T,q,B,N,x,D;for(p in e){if(e.hasOwnProperty(p)){c[p]=e[p]}}y=Array.prototype.slice.call(t.querySelectorAll(c.elementSelector));m=Array.prototype.slice.call(t.querySelectorAll(c.regionSelector));h=function(e,t){var n=e.parentNode;if(!n||e.classList&&e.classList.contains(i)){return undefined}if(t(e)){return e}return t(n)?n:h(n,t)};x=function(e){var n=Array.prototype.slice.call(t.querySelectorAll(e));n.forEach(function(e){e.parentNode.removeChild(e)})};D=function(e,t){m.forEach(function(e){e.removeEventListener(t,E.mousemove)});e.classList.remove(n);x("."+s);x("."+a)};T=function(){var e=t.createElement("div");e.setAttribute(d,true);e.classList.add(o);return e};B=function(){var e=t.createElement("div");e.classList.add(s);return e};q=function(){var e=t.createElement("div");e.classList.add(a);e.classList.add(l);t.body.appendChild(e);return e};C=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)};S=function(e,t){e.parentNode.insertBefore(t,e)};A=function(e){return e.classList&&e.classList.contains(i)};w=function(e){return e.classList&&e.classList.contains(o)};b=function(e){return e.classList&&e.classList.contains(s)};E={mousedown:function(e){e.preventDefault();var t,r=e.type==="touchstart"?"touchmove":"mousemove";m.forEach(function(e){e.addEventListener(r,E.mousemove)});L=h(e.target,w);if(!L){return false}t=L.getBoundingClientRect();g=q();g.innerHTML=L.innerHTML;g.style.width=t.width+"px";g.style.height=t.height+"px";v=g.getBoundingClientRect();L.classList.add(n)},mousemove:function(e){e.preventDefault();var n=e.changedTouches?e.changedTouches[0]:e,r=t.elementFromPoint(n.clientX,n.clientY),a=h(r,w),c,d,p;clearTimeout(N);g.style.top=n.clientY+25+"px";g.style.left=n.clientX-v.width/2+"px";g.classList.remove(l);if(a&&a!==L){p=B();c=a.getBoundingClientRect();d=c.height/2;if(n.clientY-c.top<d&&!f.top){x("."+s);p.setAttribute(u,"top");S(a.firstChild,p)}else if(c.bottom-n.clientY<d&&!f.bottom){x("."+s);p.setAttribute(u,"bottom");a.appendChild(p)}}else if(r.classList.contains(i)&&r.querySelectorAll("."+o).length===0&&r.querySelectorAll("."+s).length===0){p=B();r.appendChild(p)}},mouseup:function(e){var n=t.querySelector("."+s),o,i,a=e.type==="touchstart"?"touchmove":"mousemove",l;N=setTimeout(function(){D(L,a)},200);if(!L||!n){return false}o=h(n,w);o=o||n;if(L!==o){l=T();l.innerHTML=L.innerHTML;i=n.getAttribute(u);if(i==="top"){S(o,l)}else{C(o,l)}o.classList.remove(r);L.parentNode.removeChild(L)}D(L,a)}};y.forEach(function(e){var t=T(),n=e.parentNode;n.insertBefore(t,e);n.removeChild(e);t.appendChild(e)});m.forEach(function(e){e.classList.add(i);e.addEventListener("mousedown",E.mousedown,false);e.addEventListener("mouseup",E.mouseup,false);e.addEventListener("touchstart",E.mousedown,false);e.addEventListener("touchend",E.mouseup,false)})}})(window,window.document);
